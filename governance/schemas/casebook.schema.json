{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "canonical://casebook/schema/v1.0/casebook",
  "title": "Canonical Casebook Schema v1.0",
  "description": "Locked schema for House of Consequences Canonical Casebooks",

  "type": "object",
  "required": [
    "casebook_id",
    "canonical",
    "scope",
    "meta",
    "cases"
  ],

  "properties": {
    "casebook_id": {
      "type": "string",
      "pattern": "^CCB-[0-9]{3}$"
    },

    "canonical": {
      "type": "boolean",
      "const": true,
      "description": "Canonical Casebooks must explicitly declare canonical=true"
    },

    "scope": {
      "type": "string",
      "description": "Abstract scope of the casebook (e.g. governance, healthcare, geopolitics)"
    },

    "meta": {
      "$ref": "./canonical.meta.schema.json"
    },

    "cases": {
      "type": "array",
      "minItems": 1,
      "items": {
        "$ref": "./case.schema.json"
      }
    }
  },

  "additionalProperties": false
}
